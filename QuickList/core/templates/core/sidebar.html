<!-- sidebar.html -->
<aside class="sidebar">
    <div class="sidebar-header">
        <h2>QuickList</h2>
    </div>
    <ul class="sidebar-menu">
        <li class="{% if request.path == '/usuarios/' %}active{% endif %}">
            <a href="#" class="toggle-submenu"><i class="fa fa-users"></i> Usuarios <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'usuarios_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'usuarios_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-users-cog"></i> Grupos <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'grupos_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'grupos_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-university"></i> Academias <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'academias_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'academias_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-graduation-cap"></i> Carreras <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'carreras_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'carreras_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-file-alt"></i> Justificantes <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'justificantes_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'justificantes_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-book"></i> Materias <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'materias_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'materias_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-calendar"></i> Periodos <i
                    class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'periodos_registro' %}"><i class="fa fa-users-cog"></i> Registro</a>
                    </li>
                    <li>
                        <a href="{% url 'periodos_consulta' %}"><i class="fa fa-users-cog"></i> Consulta</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-calendar-alt"></i> Reportes <i class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'reporte_carrera' %}"><i class="fa fa-users-cog"></i> Reporte de Grupos por Carrera</a>
                    </li>
                    <li>
                        <a href="{% url 'reporte_grupo' %}"><i class="fa fa-users-cog"></i> Reporte de Grupo</a>
                    </li>
                </ul>
            </div>
        </li>
                <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-database"></i> Base de Datos <i class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'respaldo_base_datos' %}"><i class="fa fa-download"></i> Respaldo de Base de Datos</a>
                    </li>
                </ul>
            </div>
        </li>
        <li>
            <a href="#" class="toggle-submenu"><i class="fa fa-comment-alt"></i> Sistema <i class="fa fa-chevron-down"></i></a>
            <div class="submenu">
                <ul>
                    <li>
                        <a href="{% url 'administrador_retroalimentacion' %}"><i class="fa fa-comment-alt"></i>
                            Retroalimentación del Sistema</a>
                    </li>
                </ul>
            </div>
        </li>
    </ul>
    <form action="{% url 'logout' %}" method="post" style="margin: 0;">
        {% csrf_token %}
        <button type="submit" class="logout-btn">Cerrar sesión</button>
    </form>
</aside>

<script>
    // Muestra la sección activa
    function showSection(section) {
        document.querySelectorAll('.crud-section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(section).classList.add('active');
    }

    // Abre el formulario de edición
    function editarUsuario(id) {
        document.getElementById('form-editar-usuario').style.display = 'block';
    }

    // Cierra el formulario de edición
    function cerrarEditar() {
        document.getElementById('form-editar-usuario').style.display = 'none';
    }

    // Confirma la eliminación de un usuario
    function eliminarUsuario(id) {
        if (confirm('¿Estás seguro de que deseas eliminar este usuario?')) {
            // Aquí agregamos el manejo de eliminación
            alert('Usuario eliminado');
            // Lógica para eliminarlo de la base de datos se integraría aquí
        }
    }

    // Ocultar/mostrar subsecciones
    document.querySelectorAll('.toggle-submenu').forEach(toggle => {
        toggle.addEventListener('click', function (event) {
            event.preventDefault();
            const submenu = this.nextElementSibling;
            const icon = this.querySelector('.fa-chevron-down');

            if (submenu.style.display === 'none' || !submenu.style.display) {
                submenu.style.display = 'block';
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                submenu.style.display = 'none';
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        });
    });
</script>